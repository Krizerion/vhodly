# Настройка на Google Sheets за данни

Това ръководство ще ви помогне да настроите Google Sheets като източник на данни за приложението.

## Стъпка 1: Създаване на Google Sheet

1. Създайте нов Google Sheet на адрес: https://sheets.google.com
2. Създайте три табове (sheets) с имената:
   - **Announcements** - за важни съобщения
   - **Balances** - за балансите по сметки
   - **Apartments** - за данните за апартаментите

## Стъпка 2: Настройка на данните

### Таб "Announcements"
Попълнете с колони:
| ID | Message | Icon |
|----|---------|------|
| 1 | Следващо събрание на входа: 15.03.2024 г. в 18:00 ч. | event |

### Таб "Balances"
Попълнете с колони:
| Account | Balance |
|---------|---------|
| Пари в Сметка за текущи разходи | 0 |
| Пари в Сметка за ремонти | 0 |

### Таб "Apartments"
Попълнете с колони:
| Floor | Apartment | Residents | RepairsFee | CurrentExpensesFee | TotalDebt | LastPaymentDate |
|-------|-----------|-----------|------------|-------------------|-----------|-----------------|
| 1 | 116 | 4 | 2.5 | 6.0 | 0 | 25-Jan-2025 |
| 1 | null | | | | | |
| 1 | 117 | 2 | 2.5 | 3.0 | 0 | 10-Dec-2024 |
| 2 | 118 | 1 | 2.5 | 1.5 | 0 | 15-Jan-2024 |
| ... | ... | ... | ... | ... | ... | ... |

**Важно:**
- Първият ред трябва да съдържа заглавията на колоните
- За празни апартаменти използвайте `null` или празна клетка
- Датите трябва да са във формат `DD-MMM-YYYY` (например: `25-Jan-2025`)

## Стъпка 3: Получаване на Sheet ID

1. Отворете вашия Google Sheet
2. Погледнете URL-а в адресната лента
3. Намерете частта след `/spreadsheets/d/` и преди `/edit`
   - Пример: `https://docs.google.com/spreadsheets/d/1GDdBEIVX0rKUkeNifydM0w3P_6IE7pPo/edit`
   - Sheet ID е: `1GDdBEIVX0rKUkeNifydM0w3P_6IE7pPo`

## Стъпка 4: Настройка на Sheet за публичен достъп

За да може приложението да чете данните, sheet-ът трябва да е публичен:

1. Кликнете на бутона "Share" в Google Sheets
2. Кликнете на "Change to anyone with the link"
3. Изберете "Viewer" (само за четене)
4. Кликнете "Done"

**Важно:** Sheet-ът трябва да е публичен, за да работи без API ключ. Това е по-простият начин за настройка.

## Стъпка 5: Конфигуриране на приложението

1. Отворете файла `src/app/data/google-sheets.service.ts`
2. Намерете реда:
   ```typescript
   private readonly SHEET_ID = 'YOUR_SHEET_ID_HERE';
   ```
3. Заменете `YOUR_SHEET_ID_HERE` с вашия Sheet ID

**Забележка:** Не се нуждаете от API ключ, защото използваме публичен sheet.

## Стъпка 6: Активиране на Google Sheets

1. Отворете файла `src/app/data/data.service.ts`
2. Намерете реда:
   ```typescript
   private readonly USE_GOOGLE_SHEETS = false;
   ```
3. Променете на:
   ```typescript
   private readonly USE_GOOGLE_SHEETS = true;
   ```

## Стъпка 7: Тестване

1. Стартирайте приложението: `npm start`
2. Проверете дали данните се зареждат правилно
3. Ако има грешки, проверете конзолата на браузъра за детайли

## Забележки

- Google Sheets API има лимити за брой заявки на ден (безплатният план е достатъчен за малки приложения)
- За production среда, помислете за кеширане на данните
- API ключът е видим в кода, така че използвайте ограничения в Google Cloud Console
- За по-голяма сигурност, помислете за използване на backend service като посредник

## Решаване на проблеми

### Грешка: "Failed to fetch" или CORS грешка
- Уверете се, че sheet-ът е публичен ("Anyone with the link can view")
- Проверете дали Sheet ID е правилно копиран

### Грешка: "404 Not Found"
- Проверете дали Sheet ID е правилен
- Уверете се, че имената на табовете са точно: `Announcements`, `Balances`, `Apartments`

### Данните не се зареждат
- Проверете дали имената на табовете са точно: `Announcements`, `Balances`, `Apartments`
- Проверете дали форматът на данните съответства на описания по-горе
- Проверете конзолата на браузъра за грешки

